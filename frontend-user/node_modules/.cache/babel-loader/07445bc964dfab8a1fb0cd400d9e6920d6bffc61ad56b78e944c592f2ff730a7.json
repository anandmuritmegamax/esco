{"ast":null,"code":"var _jsxFileName = \"/var/www/aayoApp/frontend/src/components/admin/PriceSettingList.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport DataTable from \"react-data-table-component\";\nimport { useGetPriceSettingsQuery, useDeletePriceSettingMutation } from \"../../redux/api/priceSettingApi\";\nimport PriceSettingForm from \"./PriceSettingForm\";\nimport toast from \"react-hot-toast\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PriceSettingList = () => {\n  _s();\n  const {\n    data,\n    isLoading,\n    refetch\n  } = useGetPriceSettingsQuery();\n  const [deletePriceSetting] = useDeletePriceSettingMutation();\n  const [showForm, setShowForm] = useState(false);\n  const [editingSetting, setEditingSetting] = useState(null);\n  const handleDelete = async id => {\n    if (!window.confirm(\"Are you sure to delete this price setting?\")) return;\n    try {\n      await deletePriceSetting(id).unwrap();\n      toast.success(\"Price setting deleted\");\n      refetch();\n    } catch (err) {\n      toast.error(\"Delete failed\");\n    }\n  };\n  const columns = [{\n    name: \"Head Name\",\n    selector: row => row.headName,\n    sortable: true\n  }, {\n    name: \"Type\",\n    selector: row => row.type,\n    sortable: true\n  }, {\n    name: \"Amount\",\n    selector: row => row.amount || \"-\",\n    sortable: true\n  }, {\n    name: \"Percentage\",\n    selector: row => row.percentage || \"-\",\n    sortable: true\n  }, {\n    name: \"Dependent Heads\",\n    selector: row => {\n      var _row$dependentHeads;\n      return ((_row$dependentHeads = row.dependentHeads) === null || _row$dependentHeads === void 0 ? void 0 : _row$dependentHeads.map(h => h.headName).join(\", \")) || \"-\";\n    }\n  }, {\n    name: \"Actions\",\n    cell: row => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex gap-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-sm btn-primary\",\n        onClick: () => {\n          setEditingSetting(row);\n          setShowForm(true);\n        },\n        children: \"Edit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-sm btn-danger\",\n        onClick: () => handleDelete(row._id),\n        children: \"Delete\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 9\n    }, this)\n  }];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container mt-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex justify-content-between align-items-center mb-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Price Settings\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-success\",\n        onClick: () => {\n          setShowForm(true);\n          setEditingSetting(null);\n        },\n        children: \"Add Price Setting\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this), showForm && /*#__PURE__*/_jsxDEV(PriceSettingForm, {\n      editingSetting: editingSetting,\n      setShowForm: setShowForm,\n      refetch: refetch // ðŸ‘ˆ pass refetch like other modules\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(DataTable, {\n      columns: columns,\n      data: (data === null || data === void 0 ? void 0 : data.heads) || [],\n      progressPending: isLoading,\n      pagination: true,\n      highlightOnHover: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 5\n  }, this);\n};\n_s(PriceSettingList, \"LaGQK3as4C7nzUvqdUNvJQ1Jg3s=\", false, function () {\n  return [useGetPriceSettingsQuery, useDeletePriceSettingMutation];\n});\n_c = PriceSettingList;\nexport default PriceSettingList;\nvar _c;\n$RefreshReg$(_c, \"PriceSettingList\");","map":{"version":3,"names":["React","useState","DataTable","useGetPriceSettingsQuery","useDeletePriceSettingMutation","PriceSettingForm","toast","jsxDEV","_jsxDEV","PriceSettingList","_s","data","isLoading","refetch","deletePriceSetting","showForm","setShowForm","editingSetting","setEditingSetting","handleDelete","id","window","confirm","unwrap","success","err","error","columns","name","selector","row","headName","sortable","type","amount","percentage","_row$dependentHeads","dependentHeads","map","h","join","cell","className","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","_id","heads","progressPending","pagination","highlightOnHover","_c","$RefreshReg$"],"sources":["/var/www/aayoApp/frontend/src/components/admin/PriceSettingList.jsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport DataTable from \"react-data-table-component\";\nimport {\n  useGetPriceSettingsQuery,\n  useDeletePriceSettingMutation,\n} from \"../../redux/api/priceSettingApi\";\nimport PriceSettingForm from \"./PriceSettingForm\";\nimport toast from \"react-hot-toast\";\n\nconst PriceSettingList = () => {\n  const { data, isLoading, refetch } = useGetPriceSettingsQuery();\n  const [deletePriceSetting] = useDeletePriceSettingMutation();\n\n  const [showForm, setShowForm] = useState(false);\n  const [editingSetting, setEditingSetting] = useState(null);\n\n  const handleDelete = async (id) => {\n    if (!window.confirm(\"Are you sure to delete this price setting?\")) return;\n    try {\n      await deletePriceSetting(id).unwrap();\n      toast.success(\"Price setting deleted\");\n      refetch();\n    } catch (err) {\n      toast.error(\"Delete failed\");\n    }\n  };\n\n  const columns = [\n    { name: \"Head Name\", selector: (row) => row.headName, sortable: true },\n    { name: \"Type\", selector: (row) => row.type, sortable: true },\n    { name: \"Amount\", selector: (row) => row.amount || \"-\", sortable: true },\n    {\n      name: \"Percentage\",\n      selector: (row) => row.percentage || \"-\",\n      sortable: true,\n    },\n    {\n      name: \"Dependent Heads\",\n      selector: (row) =>\n        row.dependentHeads?.map((h) => h.headName).join(\", \") || \"-\",\n    },\n    {\n      name: \"Actions\",\n      cell: (row) => (\n        <div className=\"d-flex gap-2\">\n          <button\n            className=\"btn btn-sm btn-primary\"\n            onClick={() => {\n              setEditingSetting(row);\n              setShowForm(true);\n            }}\n          >\n            Edit\n          </button>\n          <button\n            className=\"btn btn-sm btn-danger\"\n            onClick={() => handleDelete(row._id)}\n          >\n            Delete\n          </button>\n        </div>\n      ),\n    },\n  ];\n\n  return (\n    <div className=\"container mt-4\">\n      <div className=\"d-flex justify-content-between align-items-center mb-3\">\n        <h3>Price Settings</h3>\n        <button\n          className=\"btn btn-success\"\n          onClick={() => {\n            setShowForm(true);\n            setEditingSetting(null);\n          }}\n        >\n          Add Price Setting\n        </button>\n      </div>\n\n      {showForm && (\n        <PriceSettingForm\n          editingSetting={editingSetting}\n          setShowForm={setShowForm}\n          refetch={refetch} // ðŸ‘ˆ pass refetch like other modules\n        />\n      )}\n\n      <DataTable\n        columns={columns}\n        data={data?.heads || []}\n        progressPending={isLoading}\n        pagination\n        highlightOnHover\n      />\n    </div>\n  );\n};\n\nexport default PriceSettingList;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,OAAOC,SAAS,MAAM,4BAA4B;AAClD,SACEC,wBAAwB,EACxBC,6BAA6B,QACxB,iCAAiC;AACxC,OAAOC,gBAAgB,MAAM,oBAAoB;AACjD,OAAOC,KAAK,MAAM,iBAAiB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEpC,MAAMC,gBAAgB,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC7B,MAAM;IAAEC,IAAI;IAAEC,SAAS;IAAEC;EAAQ,CAAC,GAAGV,wBAAwB,CAAC,CAAC;EAC/D,MAAM,CAACW,kBAAkB,CAAC,GAAGV,6BAA6B,CAAC,CAAC;EAE5D,MAAM,CAACW,QAAQ,EAAEC,WAAW,CAAC,GAAGf,QAAQ,CAAC,KAAK,CAAC;EAC/C,MAAM,CAACgB,cAAc,EAAEC,iBAAiB,CAAC,GAAGjB,QAAQ,CAAC,IAAI,CAAC;EAE1D,MAAMkB,YAAY,GAAG,MAAOC,EAAE,IAAK;IACjC,IAAI,CAACC,MAAM,CAACC,OAAO,CAAC,4CAA4C,CAAC,EAAE;IACnE,IAAI;MACF,MAAMR,kBAAkB,CAACM,EAAE,CAAC,CAACG,MAAM,CAAC,CAAC;MACrCjB,KAAK,CAACkB,OAAO,CAAC,uBAAuB,CAAC;MACtCX,OAAO,CAAC,CAAC;IACX,CAAC,CAAC,OAAOY,GAAG,EAAE;MACZnB,KAAK,CAACoB,KAAK,CAAC,eAAe,CAAC;IAC9B;EACF,CAAC;EAED,MAAMC,OAAO,GAAG,CACd;IAAEC,IAAI,EAAE,WAAW;IAAEC,QAAQ,EAAGC,GAAG,IAAKA,GAAG,CAACC,QAAQ;IAAEC,QAAQ,EAAE;EAAK,CAAC,EACtE;IAAEJ,IAAI,EAAE,MAAM;IAAEC,QAAQ,EAAGC,GAAG,IAAKA,GAAG,CAACG,IAAI;IAAED,QAAQ,EAAE;EAAK,CAAC,EAC7D;IAAEJ,IAAI,EAAE,QAAQ;IAAEC,QAAQ,EAAGC,GAAG,IAAKA,GAAG,CAACI,MAAM,IAAI,GAAG;IAAEF,QAAQ,EAAE;EAAK,CAAC,EACxE;IACEJ,IAAI,EAAE,YAAY;IAClBC,QAAQ,EAAGC,GAAG,IAAKA,GAAG,CAACK,UAAU,IAAI,GAAG;IACxCH,QAAQ,EAAE;EACZ,CAAC,EACD;IACEJ,IAAI,EAAE,iBAAiB;IACvBC,QAAQ,EAAGC,GAAG;MAAA,IAAAM,mBAAA;MAAA,OACZ,EAAAA,mBAAA,GAAAN,GAAG,CAACO,cAAc,cAAAD,mBAAA,uBAAlBA,mBAAA,CAAoBE,GAAG,CAAEC,CAAC,IAAKA,CAAC,CAACR,QAAQ,CAAC,CAACS,IAAI,CAAC,IAAI,CAAC,KAAI,GAAG;IAAA;EAChE,CAAC,EACD;IACEZ,IAAI,EAAE,SAAS;IACfa,IAAI,EAAGX,GAAG,iBACRtB,OAAA;MAAKkC,SAAS,EAAC,cAAc;MAAAC,QAAA,gBAC3BnC,OAAA;QACEkC,SAAS,EAAC,wBAAwB;QAClCE,OAAO,EAAEA,CAAA,KAAM;UACb1B,iBAAiB,CAACY,GAAG,CAAC;UACtBd,WAAW,CAAC,IAAI,CAAC;QACnB,CAAE;QAAA2B,QAAA,EACH;MAED;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,eACTxC,OAAA;QACEkC,SAAS,EAAC,uBAAuB;QACjCE,OAAO,EAAEA,CAAA,KAAMzB,YAAY,CAACW,GAAG,CAACmB,GAAG,CAAE;QAAAN,QAAA,EACtC;MAED;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACN;EAET,CAAC,CACF;EAED,oBACExC,OAAA;IAAKkC,SAAS,EAAC,gBAAgB;IAAAC,QAAA,gBAC7BnC,OAAA;MAAKkC,SAAS,EAAC,wDAAwD;MAAAC,QAAA,gBACrEnC,OAAA;QAAAmC,QAAA,EAAI;MAAc;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eACvBxC,OAAA;QACEkC,SAAS,EAAC,iBAAiB;QAC3BE,OAAO,EAAEA,CAAA,KAAM;UACb5B,WAAW,CAAC,IAAI,CAAC;UACjBE,iBAAiB,CAAC,IAAI,CAAC;QACzB,CAAE;QAAAyB,QAAA,EACH;MAED;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACN,CAAC,EAELjC,QAAQ,iBACPP,OAAA,CAACH,gBAAgB;MACfY,cAAc,EAAEA,cAAe;MAC/BD,WAAW,EAAEA,WAAY;MACzBH,OAAO,EAAEA,OAAQ,CAAC;IAAA;MAAAgC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACnB,CACF,eAEDxC,OAAA,CAACN,SAAS;MACRyB,OAAO,EAAEA,OAAQ;MACjBhB,IAAI,EAAE,CAAAA,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEuC,KAAK,KAAI,EAAG;MACxBC,eAAe,EAAEvC,SAAU;MAC3BwC,UAAU;MACVC,gBAAgB;IAAA;MAAAR,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACjB,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACC,CAAC;AAEV,CAAC;AAACtC,EAAA,CAxFID,gBAAgB;EAAA,QACiBN,wBAAwB,EAChCC,6BAA6B;AAAA;AAAAkD,EAAA,GAFtD7C,gBAAgB;AA0FtB,eAAeA,gBAAgB;AAAC,IAAA6C,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}