{"ast":null,"code":"import { createApi, fetchBaseQuery } from \"@reduxjs/toolkit/query/react\";\nimport { setIsAuthenticated, setUser } from \"../features/userSlice\";\nexport const userApi = createApi({\n  reducerPath: \"userApi\",\n  baseQuery: fetchBaseQuery({\n    baseUrl: \"/api/v1\"\n  }),\n  tagTypes: [\"User\"],\n  endpoints: builder => ({\n    getMe: builder.query({\n      query: () => `/me`,\n      transformResponse: result => result.user,\n      async onQueryStarted(args, {\n        dispatch,\n        queryFulfilled\n      }) {\n        try {\n          const {\n            data\n          } = await queryFulfilled;\n          dispatch(setUser(data));\n          dispatch(setIsAuthenticated(true));\n        } catch (error) {\n          console.log(error);\n        }\n      },\n      providesTags: ['User']\n    }),\n    updateProfile: builder.mutation({\n      query(body) {\n        return {\n          url: \"/me/update\",\n          method: \"PUT\",\n          body\n        };\n      }\n    })\n  })\n});\nexport const {\n  useGetMeQuery,\n  useUpdateProfileMutation\n} = userApi;","map":{"version":3,"names":["createApi","fetchBaseQuery","setIsAuthenticated","setUser","userApi","reducerPath","baseQuery","baseUrl","tagTypes","endpoints","builder","getMe","query","transformResponse","result","user","onQueryStarted","args","dispatch","queryFulfilled","data","error","console","log","providesTags","updateProfile","mutation","body","url","method","useGetMeQuery","useUpdateProfileMutation"],"sources":["/var/www/aayoApp/frontend/src/redux/api/userApi.js"],"sourcesContent":["import { createApi, fetchBaseQuery } from \"@reduxjs/toolkit/query/react\"\nimport { setIsAuthenticated, setUser } from \"../features/userSlice\";\n\nexport const userApi = createApi({\n    reducerPath: \"userApi\",\n    baseQuery: fetchBaseQuery({\n        baseUrl: \"/api/v1\"\n    }),\n    tagTypes: [\"User\"],\n    endpoints: (builder) => ({\n        getMe: builder.query({\n            query: () => `/me`,\n            transformResponse: (result) => result.user,\n            async onQueryStarted(args, { dispatch, queryFulfilled }) {\n                try {\n                    const { data } = await queryFulfilled;\n                    dispatch(setUser(data));\n                    dispatch(setIsAuthenticated(true))\n                } catch (error) {\n                    console.log(error)\n                }\n            },\n            providesTags: ['User']\n        }),\n        updateProfile: builder.mutation({\n            query(body) {\n                return {\n                    url: \"/me/update\",\n                    method: \"PUT\",\n                    body,\n                }\n            }\n        })\n    })\n})\n\nexport const { useGetMeQuery, useUpdateProfileMutation } = userApi;"],"mappings":"AAAA,SAASA,SAAS,EAAEC,cAAc,QAAQ,8BAA8B;AACxE,SAASC,kBAAkB,EAAEC,OAAO,QAAQ,uBAAuB;AAEnE,OAAO,MAAMC,OAAO,GAAGJ,SAAS,CAAC;EAC7BK,WAAW,EAAE,SAAS;EACtBC,SAAS,EAAEL,cAAc,CAAC;IACtBM,OAAO,EAAE;EACb,CAAC,CAAC;EACFC,QAAQ,EAAE,CAAC,MAAM,CAAC;EAClBC,SAAS,EAAGC,OAAO,KAAM;IACrBC,KAAK,EAAED,OAAO,CAACE,KAAK,CAAC;MACjBA,KAAK,EAAEA,CAAA,KAAM,KAAK;MAClBC,iBAAiB,EAAGC,MAAM,IAAKA,MAAM,CAACC,IAAI;MAC1C,MAAMC,cAAcA,CAACC,IAAI,EAAE;QAAEC,QAAQ;QAAEC;MAAe,CAAC,EAAE;QACrD,IAAI;UACA,MAAM;YAAEC;UAAK,CAAC,GAAG,MAAMD,cAAc;UACrCD,QAAQ,CAACf,OAAO,CAACiB,IAAI,CAAC,CAAC;UACvBF,QAAQ,CAAChB,kBAAkB,CAAC,IAAI,CAAC,CAAC;QACtC,CAAC,CAAC,OAAOmB,KAAK,EAAE;UACZC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;QACtB;MACJ,CAAC;MACDG,YAAY,EAAE,CAAC,MAAM;IACzB,CAAC,CAAC;IACFC,aAAa,EAAEf,OAAO,CAACgB,QAAQ,CAAC;MAC5Bd,KAAKA,CAACe,IAAI,EAAE;QACR,OAAO;UACHC,GAAG,EAAE,YAAY;UACjBC,MAAM,EAAE,KAAK;UACbF;QACJ,CAAC;MACL;IACJ,CAAC;EACL,CAAC;AACL,CAAC,CAAC;AAEF,OAAO,MAAM;EAAEG,aAAa;EAAEC;AAAyB,CAAC,GAAG3B,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}