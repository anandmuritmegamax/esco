{"ast":null,"code":"import { createSlice } from \"@reduxjs/toolkit\";\nconst initialState = {\n  user: null,\n  isAuthenticated: false,\n  loading: true\n};\nexport const userSlice = createSlice({\n  initialState,\n  name: \"userSlice\",\n  reducers: {\n    setUser(state, action) {\n      var _user$role, _user$role2, _user$role2$permissio;\n      const user = action.payload;\n      console.log(\"role object\", user.role);\n      console.log(\"permissions:\", user === null || user === void 0 ? void 0 : (_user$role = user.role) === null || _user$role === void 0 ? void 0 : _user$role.permissions);\n      state.user = {\n        ...user,\n        permissions: (user === null || user === void 0 ? void 0 : (_user$role2 = user.role) === null || _user$role2 === void 0 ? void 0 : (_user$role2$permissio = _user$role2.permissions) === null || _user$role2$permissio === void 0 ? void 0 : _user$role2$permissio.map(p => p.name)) || []\n      };\n      state.isAuthenticated = true;\n      //state.user = action.payload;\n    },\n    setIsAuthenticated(state, action) {\n      state.isAuthenticated = action.payload;\n    },\n    setLoading(state, action) {\n      state.loading = action.payload;\n    },\n    clearUser(state) {\n      state.user = null;\n      state.isAuthenticated = false;\n    }\n  }\n});\nexport default userSlice.reducer;\nexport const {\n  setIsAuthenticated,\n  setUser,\n  setLoading,\n  clearUser\n} = userSlice.actions;","map":{"version":3,"names":["createSlice","initialState","user","isAuthenticated","loading","userSlice","name","reducers","setUser","state","action","_user$role","_user$role2","_user$role2$permissio","payload","console","log","role","permissions","map","p","setIsAuthenticated","setLoading","clearUser","reducer","actions"],"sources":["/var/www/aayoApp/frontend/src/redux/features/userSlice.js"],"sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\n\nconst initialState = {\n    user: null,\n    isAuthenticated: false,\n    loading: true,\n}\nexport const userSlice = createSlice({\n    initialState,\n    name: \"userSlice\",\n    reducers: {\n        setUser(state, action) {\n            const user = action.payload;\n            console.log(\"role object\", user.role);\n            console.log(\"permissions:\", user?.role?.permissions)\n            state.user = {\n                ...user,\n                permissions: user?.role?.permissions?.map((p) => p.name) || [],\n            };\n            state.isAuthenticated = true;\n            //state.user = action.payload;\n        },\n        setIsAuthenticated(state, action) {\n            state.isAuthenticated = action.payload;\n        },\n        setLoading(state, action) {\n            state.loading = action.payload;\n        },\n        clearUser(state) {\n            state.user = null;\n            state.isAuthenticated = false;\n        },\n    }\n});\n\nexport default userSlice.reducer;\n\nexport const { setIsAuthenticated, setUser, setLoading, clearUser } = userSlice.actions"],"mappings":"AAAA,SAASA,WAAW,QAAQ,kBAAkB;AAE9C,MAAMC,YAAY,GAAG;EACjBC,IAAI,EAAE,IAAI;EACVC,eAAe,EAAE,KAAK;EACtBC,OAAO,EAAE;AACb,CAAC;AACD,OAAO,MAAMC,SAAS,GAAGL,WAAW,CAAC;EACjCC,YAAY;EACZK,IAAI,EAAE,WAAW;EACjBC,QAAQ,EAAE;IACNC,OAAOA,CAACC,KAAK,EAAEC,MAAM,EAAE;MAAA,IAAAC,UAAA,EAAAC,WAAA,EAAAC,qBAAA;MACnB,MAAMX,IAAI,GAAGQ,MAAM,CAACI,OAAO;MAC3BC,OAAO,CAACC,GAAG,CAAC,aAAa,EAAEd,IAAI,CAACe,IAAI,CAAC;MACrCF,OAAO,CAACC,GAAG,CAAC,cAAc,EAAEd,IAAI,aAAJA,IAAI,wBAAAS,UAAA,GAAJT,IAAI,CAAEe,IAAI,cAAAN,UAAA,uBAAVA,UAAA,CAAYO,WAAW,CAAC;MACpDT,KAAK,CAACP,IAAI,GAAG;QACT,GAAGA,IAAI;QACPgB,WAAW,EAAE,CAAAhB,IAAI,aAAJA,IAAI,wBAAAU,WAAA,GAAJV,IAAI,CAAEe,IAAI,cAAAL,WAAA,wBAAAC,qBAAA,GAAVD,WAAA,CAAYM,WAAW,cAAAL,qBAAA,uBAAvBA,qBAAA,CAAyBM,GAAG,CAAEC,CAAC,IAAKA,CAAC,CAACd,IAAI,CAAC,KAAI;MAChE,CAAC;MACDG,KAAK,CAACN,eAAe,GAAG,IAAI;MAC5B;IACJ,CAAC;IACDkB,kBAAkBA,CAACZ,KAAK,EAAEC,MAAM,EAAE;MAC9BD,KAAK,CAACN,eAAe,GAAGO,MAAM,CAACI,OAAO;IAC1C,CAAC;IACDQ,UAAUA,CAACb,KAAK,EAAEC,MAAM,EAAE;MACtBD,KAAK,CAACL,OAAO,GAAGM,MAAM,CAACI,OAAO;IAClC,CAAC;IACDS,SAASA,CAACd,KAAK,EAAE;MACbA,KAAK,CAACP,IAAI,GAAG,IAAI;MACjBO,KAAK,CAACN,eAAe,GAAG,KAAK;IACjC;EACJ;AACJ,CAAC,CAAC;AAEF,eAAeE,SAAS,CAACmB,OAAO;AAEhC,OAAO,MAAM;EAAEH,kBAAkB;EAAEb,OAAO;EAAEc,UAAU;EAAEC;AAAU,CAAC,GAAGlB,SAAS,CAACoB,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}