{"ast":null,"code":"var _jsxFileName = \"/var/www/aayoApp/frontend/src/components/admin/FlightCategoryForm.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport { useCreateFlightCategoryMutation, useUpdateFlightCategoryMutation } from \"../../redux/api/flightCategoryApi\";\nimport toast from \"react-hot-toast\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst FlightCategoryForm = ({\n  initialData,\n  onClose\n}) => {\n  _s();\n  var _initialData$image;\n  const [formState, setFormState] = useState({\n    name: (initialData === null || initialData === void 0 ? void 0 : initialData.name) || \"\",\n    description: (initialData === null || initialData === void 0 ? void 0 : initialData.description) || \"\",\n    image: null,\n    previewImage: (initialData === null || initialData === void 0 ? void 0 : (_initialData$image = initialData.image) === null || _initialData$image === void 0 ? void 0 : _initialData$image.url) || null\n  });\n  const [createCategory] = useCreateFlightCategoryMutation();\n  const [updateCategory] = useUpdateFlightCategoryMutation();\n  const isEdit = Boolean(initialData === null || initialData === void 0 ? void 0 : initialData._id);\n  const handleChange = e => {\n    const {\n      name,\n      value,\n      files\n    } = e.target;\n    if (name === \"image\" && files.length > 0) {\n      setFormState(prev => ({\n        ...prev,\n        image: files[0],\n        previewImage: URL.createObjectURL(files[0])\n      }));\n    } else {\n      setFormState(prev => ({\n        ...prev,\n        [name]: value\n      }));\n    }\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    try {\n      const formData = new FormData();\n      formData.append(\"name\", formState.name);\n      formData.append(\"description\", formState.description);\n      if (formState.image) {\n        formData.append(\"image\", formState.image);\n      }\n      if (isEdit) {\n        await updateCategory({\n          id: initialData._id,\n          formData\n        }).unwrap();\n        toast.success(\"Flight Category updated successfully\");\n      } else {\n        await createCategory(formData).unwrap();\n        toast.success(\"Flight Category created successfully\");\n      }\n      onClose();\n    } catch (err) {\n      var _err$data;\n      toast.error((err === null || err === void 0 ? void 0 : (_err$data = err.data) === null || _err$data === void 0 ? void 0 : _err$data.message) || \"Something went wrong\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n      children: [isEdit ? \"Edit\" : \"Add\", \" Flight Category\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      encType: \"multipart/form-data\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-label\",\n          children: \"Name\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"name\",\n          value: formState.name,\n          onChange: handleChange,\n          className: \"form-control\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-label\",\n          children: \"Description\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          name: \"description\",\n          value: formState.description,\n          onChange: handleChange,\n          className: \"form-control\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-label\",\n          children: \"Image\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          name: \"image\",\n          onChange: handleChange,\n          className: \"form-control\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 11\n        }, this), formState.previewImage && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-2\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: formState.previewImage,\n            alt: \"Preview\",\n            width: \"120\",\n            style: {\n              border: \"1px solid #ccc\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"btn btn-primary\",\n          children: isEdit ? \"Update\" : \"Create\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"btn btn-secondary\",\n          onClick: onClose,\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 5\n  }, this);\n};\n_s(FlightCategoryForm, \"AjKE/WNcr3HmLELX/Nfx4IS7kYg=\", false, function () {\n  return [useCreateFlightCategoryMutation, useUpdateFlightCategoryMutation];\n});\n_c = FlightCategoryForm;\nexport default FlightCategoryForm;\nvar _c;\n$RefreshReg$(_c, \"FlightCategoryForm\");","map":{"version":3,"names":["React","useState","useCreateFlightCategoryMutation","useUpdateFlightCategoryMutation","toast","jsxDEV","_jsxDEV","FlightCategoryForm","initialData","onClose","_s","_initialData$image","formState","setFormState","name","description","image","previewImage","url","createCategory","updateCategory","isEdit","Boolean","_id","handleChange","e","value","files","target","length","prev","URL","createObjectURL","handleSubmit","preventDefault","formData","FormData","append","id","unwrap","success","err","_err$data","error","data","message","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","encType","className","type","onChange","required","src","alt","width","style","border","onClick","_c","$RefreshReg$"],"sources":["/var/www/aayoApp/frontend/src/components/admin/FlightCategoryForm.jsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport {\n  useCreateFlightCategoryMutation,\n  useUpdateFlightCategoryMutation,\n} from \"../../redux/api/flightCategoryApi\";\nimport toast from \"react-hot-toast\";\n\nconst FlightCategoryForm = ({ initialData, onClose }) => {\n  const [formState, setFormState] = useState({\n    name: initialData?.name || \"\",\n    description: initialData?.description || \"\",\n    image: null,\n    previewImage: initialData?.image?.url || null,\n  });\n\n  const [createCategory] = useCreateFlightCategoryMutation();\n  const [updateCategory] = useUpdateFlightCategoryMutation();\n\n  const isEdit = Boolean(initialData?._id);\n\n  const handleChange = (e) => {\n    const { name, value, files } = e.target;\n    if (name === \"image\" && files.length > 0) {\n      setFormState((prev) => ({\n        ...prev,\n        image: files[0],\n        previewImage: URL.createObjectURL(files[0]),\n      }));\n    } else {\n      setFormState((prev) => ({ ...prev, [name]: value }));\n    }\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    try {\n      const formData = new FormData();\n      formData.append(\"name\", formState.name);\n      formData.append(\"description\", formState.description);\n      if (formState.image) {\n        formData.append(\"image\", formState.image);\n      }\n\n      if (isEdit) {\n        await updateCategory({ id: initialData._id, formData }).unwrap();\n        toast.success(\"Flight Category updated successfully\");\n      } else {\n        await createCategory(formData).unwrap();\n        toast.success(\"Flight Category created successfully\");\n      }\n      onClose();\n    } catch (err) {\n      toast.error(err?.data?.message || \"Something went wrong\");\n    }\n  };\n\n  return (\n    <div>\n      <h4>{isEdit ? \"Edit\" : \"Add\"} Flight Category</h4>\n      <form onSubmit={handleSubmit} encType=\"multipart/form-data\">\n        <div className=\"mb-3\">\n          <label className=\"form-label\">Name</label>\n          <input\n            type=\"text\"\n            name=\"name\"\n            value={formState.name}\n            onChange={handleChange}\n            className=\"form-control\"\n            required\n          />\n        </div>\n\n        <div className=\"mb-3\">\n          <label className=\"form-label\">Description</label>\n          <textarea\n            name=\"description\"\n            value={formState.description}\n            onChange={handleChange}\n            className=\"form-control\"\n            required\n          />\n        </div>\n\n        <div className=\"mb-3\">\n          <label className=\"form-label\">Image</label>\n          <input\n            type=\"file\"\n            name=\"image\"\n            onChange={handleChange}\n            className=\"form-control\"\n          />\n          {formState.previewImage && (\n            <div className=\"mt-2\">\n              <img\n                src={formState.previewImage}\n                alt=\"Preview\"\n                width=\"120\"\n                style={{ border: \"1px solid #ccc\" }}\n              />\n            </div>\n          )}\n        </div>\n\n        <div className=\"d-flex gap-2\">\n          <button type=\"submit\" className=\"btn btn-primary\">\n            {isEdit ? \"Update\" : \"Create\"}\n          </button>\n          <button type=\"button\" className=\"btn btn-secondary\" onClick={onClose}>\n            Cancel\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default FlightCategoryForm;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}