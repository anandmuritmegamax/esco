{"ast":null,"code":"var _jsxFileName = \"/var/www/aayoS/frontend/src/components/admin/pricing/PricingList.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useMemo } from \"react\";\nimport DataTable from \"react-data-table-component\";\nimport { useGetPlansQuery, useDeletePlanMutation } from \"../../../redux/api/pricingApi\";\nimport toast from \"react-hot-toast\";\nimport PricingForm from \"./PricingForm\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PricingList = () => {\n  _s();\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [showForm, setShowForm] = useState(false);\n  const [editPlan, setEditPlan] = useState(null);\n  const {\n    data,\n    isLoading,\n    refetch\n  } = useGetPlansQuery();\n  const [deletePlan] = useDeletePlanMutation();\n  const plans = (data === null || data === void 0 ? void 0 : data.plans) || [];\n  const filtered = useMemo(() => {\n    if (!searchTerm.trim()) return plans;\n    const s = searchTerm.toLowerCase();\n    return plans.filter(p => {\n      const target = `${p.name} ${p.currency} ${p.billingCycle} ${p.status}`.toLowerCase();\n      return target.includes(s);\n    });\n  }, [searchTerm, plans]);\n  const handleDelete = async id => {\n    if (!window.confirm(\"Are you sure?\")) return;\n    try {\n      await deletePlan(id).unwrap();\n      toast.success(\"Plan deleted\");\n      refetch();\n    } catch (err) {\n      toast.error(\"Delete failed\");\n    }\n  };\n  const columns = [{\n    name: \"Name\",\n    selector: r => r.name,\n    sortable: true,\n    center: true\n  }, {\n    name: \"Price\",\n    selector: r => `${r.currency} ${r.price}`,\n    center: true\n  }, {\n    name: \"Billing\",\n    selector: r => r.billingCycle,\n    center: true\n  }, {\n    name: \"Max Images\",\n    selector: r => r.maxPortfolioImages,\n    center: true\n  }, {\n    name: \"Priority\",\n    selector: r => r.priorityLevel,\n    center: true\n  }, {\n    name: \"Status\",\n    cell: r => /*#__PURE__*/_jsxDEV(\"span\", {\n      className: `badge bg-${r.status === \"active\" ? \"success\" : \"secondary\"}`,\n      children: r.status\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }, this),\n    center: true\n  }, {\n    name: \"Actions\",\n    cell: row => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"dropdown position-static\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-sm btn-secondary dropdown-toggle\",\n        \"data-bs-toggle\": \"dropdown\",\n        children: \"Actions\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"dropdown-menu position-fixed\",\n        children: [/*#__PURE__*/_jsxDEV(\"li\", {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"dropdown-item\",\n            onClick: () => {\n              setEditPlan(row);\n              setShowForm(true);\n            },\n            children: \"Edit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"dropdown-item\",\n            onClick: () => handleDelete(row._id),\n            children: \"Delete\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }, this),\n    ignoreRowClick: true,\n    allowOverflow: true,\n    center: true\n  }];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container mt-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex justify-content-between align-items-center mb-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Pricing Plans\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-primary\",\n        onClick: () => {\n          setEditPlan(null);\n          setShowForm(!showForm);\n        },\n        children: showForm ? \"Close Form\" : \"Add Plan\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }, this), showForm && /*#__PURE__*/_jsxDEV(PricingForm, {\n      plan: editPlan,\n      onSaved: () => {\n        setShowForm(false);\n        refetch();\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-3\",\n      children: /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Search plans...\",\n        className: \"form-control\",\n        value: searchTerm,\n        onChange: e => setSearchTerm(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(DataTable, {\n      columns: columns,\n      data: filtered,\n      progressPending: isLoading,\n      pagination: true,\n      highlightOnHover: true,\n      striped: true,\n      responsive: true,\n      noDataComponent: \"No plans found\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 104,\n    columnNumber: 5\n  }, this);\n};\n_s(PricingList, \"iJqCvZ06YFo8VlpnJkBWM7Adx1c=\", false, function () {\n  return [useGetPlansQuery, useDeletePlanMutation];\n});\n_c = PricingList;\nexport default PricingList;\nvar _c;\n$RefreshReg$(_c, \"PricingList\");","map":{"version":3,"names":["React","useState","useMemo","DataTable","useGetPlansQuery","useDeletePlanMutation","toast","PricingForm","jsxDEV","_jsxDEV","PricingList","_s","searchTerm","setSearchTerm","showForm","setShowForm","editPlan","setEditPlan","data","isLoading","refetch","deletePlan","plans","filtered","trim","s","toLowerCase","filter","p","target","name","currency","billingCycle","status","includes","handleDelete","id","window","confirm","unwrap","success","err","error","columns","selector","r","sortable","center","price","maxPortfolioImages","priorityLevel","cell","className","children","fileName","_jsxFileName","lineNumber","columnNumber","row","onClick","_id","ignoreRowClick","allowOverflow","plan","onSaved","type","placeholder","value","onChange","e","progressPending","pagination","highlightOnHover","striped","responsive","noDataComponent","_c","$RefreshReg$"],"sources":["/var/www/aayoS/frontend/src/components/admin/pricing/PricingList.jsx"],"sourcesContent":["import React, { useState, useMemo } from \"react\";\nimport DataTable from \"react-data-table-component\";\nimport {\n  useGetPlansQuery,\n  useDeletePlanMutation,\n} from \"../../../redux/api/pricingApi\";\nimport toast from \"react-hot-toast\";\nimport PricingForm from \"./PricingForm\";\n\nconst PricingList = () => {\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [showForm, setShowForm] = useState(false);\n  const [editPlan, setEditPlan] = useState(null);\n\n  const { data, isLoading, refetch } = useGetPlansQuery();\n  const [deletePlan] = useDeletePlanMutation();\n\n  const plans = data?.plans || [];\n\n  const filtered = useMemo(() => {\n    if (!searchTerm.trim()) return plans;\n    const s = searchTerm.toLowerCase();\n    return plans.filter((p) => {\n      const target =\n        `${p.name} ${p.currency} ${p.billingCycle} ${p.status}`.toLowerCase();\n      return target.includes(s);\n    });\n  }, [searchTerm, plans]);\n\n  const handleDelete = async (id) => {\n    if (!window.confirm(\"Are you sure?\")) return;\n    try {\n      await deletePlan(id).unwrap();\n      toast.success(\"Plan deleted\");\n      refetch();\n    } catch (err) {\n      toast.error(\"Delete failed\");\n    }\n  };\n\n  const columns = [\n    { name: \"Name\", selector: (r) => r.name, sortable: true, center: true },\n    {\n      name: \"Price\",\n      selector: (r) => `${r.currency} ${r.price}`,\n      center: true,\n    },\n    { name: \"Billing\", selector: (r) => r.billingCycle, center: true },\n    { name: \"Max Images\", selector: (r) => r.maxPortfolioImages, center: true },\n    { name: \"Priority\", selector: (r) => r.priorityLevel, center: true },\n    {\n      name: \"Status\",\n      cell: (r) => (\n        <span\n          className={`badge bg-${\n            r.status === \"active\" ? \"success\" : \"secondary\"\n          }`}\n        >\n          {r.status}\n        </span>\n      ),\n      center: true,\n    },\n    {\n      name: \"Actions\",\n      cell: (row) => (\n        <div className=\"dropdown position-static\">\n          <button\n            className=\"btn btn-sm btn-secondary dropdown-toggle\"\n            data-bs-toggle=\"dropdown\"\n          >\n            Actions\n          </button>\n          <ul className=\"dropdown-menu position-fixed\">\n            <li>\n              <button\n                className=\"dropdown-item\"\n                onClick={() => {\n                  setEditPlan(row);\n                  setShowForm(true);\n                }}\n              >\n                Edit\n              </button>\n            </li>\n            <li>\n              <button\n                className=\"dropdown-item\"\n                onClick={() => handleDelete(row._id)}\n              >\n                Delete\n              </button>\n            </li>\n          </ul>\n        </div>\n      ),\n      ignoreRowClick: true,\n      allowOverflow: true,\n      center: true,\n    },\n  ];\n\n  return (\n    <div className=\"container mt-4\">\n      <div className=\"d-flex justify-content-between align-items-center mb-3\">\n        <h2>Pricing Plans</h2>\n        <button\n          className=\"btn btn-primary\"\n          onClick={() => {\n            setEditPlan(null);\n            setShowForm(!showForm);\n          }}\n        >\n          {showForm ? \"Close Form\" : \"Add Plan\"}\n        </button>\n      </div>\n\n      {showForm && (\n        <PricingForm\n          plan={editPlan}\n          onSaved={() => {\n            setShowForm(false);\n            refetch();\n          }}\n        />\n      )}\n\n      <div className=\"mb-3\">\n        <input\n          type=\"text\"\n          placeholder=\"Search plans...\"\n          className=\"form-control\"\n          value={searchTerm}\n          onChange={(e) => setSearchTerm(e.target.value)}\n        />\n      </div>\n\n      <DataTable\n        columns={columns}\n        data={filtered}\n        progressPending={isLoading}\n        pagination\n        highlightOnHover\n        striped\n        responsive\n        noDataComponent=\"No plans found\"\n      />\n    </div>\n  );\n};\n\nexport default PricingList;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}