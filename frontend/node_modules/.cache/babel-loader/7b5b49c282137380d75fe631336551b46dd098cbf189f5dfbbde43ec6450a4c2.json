{"ast":null,"code":"var _jsxFileName = \"/var/www/aayoApp/frontend/src/components/admin/BookingHistoryModal.jsx\",\n  _s = $RefreshSig$();\nimport React from \"react\";\nimport { useGetBookingHistoryQuery } from \"../../redux/api/bookingApi\";\nimport DataTable from \"react-data-table-component\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst BookingHistoryModal = ({\n  booking,\n  onClose\n}) => {\n  _s();\n  var _booking$user;\n  const {\n    data,\n    isLoading\n  } = useGetBookingHistoryQuery(booking._id);\n  const histories = (data === null || data === void 0 ? void 0 : data.histories) || [];\n\n  // ✅ Helper: format oldData into user-friendly display\n  const renderOldData = oldData => {\n    if (!oldData || typeof oldData !== \"object\") return \"-\";\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        background: \"#f8f9fa\",\n        padding: \"8px\",\n        borderRadius: \"8px\",\n        maxWidth: \"350px\",\n        overflow: \"auto\",\n        fontSize: \"12px\"\n      },\n      children: /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"mb-0\",\n        style: {\n          listStyle: \"none\",\n          padding: 0\n        },\n        children: Object.entries(oldData).map(([key, value]) => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: [key.replace(/([A-Z])/g, \" $1\"), \": \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 27,\n            columnNumber: 15\n          }, this), typeof value === \"object\" ? JSON.stringify(value) : String(value || \"-\")]\n        }, key, true, {\n          fileName: _jsxFileName,\n          lineNumber: 26,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 24,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 14,\n      columnNumber: 7\n    }, this);\n  };\n  const columns = [{\n    name: \"Change Type\",\n    selector: row => row.changeType || \"-\",\n    sortable: true,\n    center: true\n  }, {\n    name: \"Updated By\",\n    selector: row => {\n      var _row$updatedBy;\n      return ((_row$updatedBy = row.updatedBy) === null || _row$updatedBy === void 0 ? void 0 : _row$updatedBy.name) || \"-\";\n    },\n    center: true\n  }, {\n    name: \"Date\",\n    selector: row => new Date(row.createdAt).toLocaleString(\"en-IN\", {\n      dateStyle: \"medium\",\n      timeStyle: \"short\"\n    }),\n    center: true\n  }, {\n    name: \"Old Data\",\n    cell: row => renderOldData(row.oldData),\n    grow: 3\n  }];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"modal fade show\",\n    style: {\n      display: \"block\",\n      backgroundColor: \"rgba(0,0,0,0.5)\"\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-dialog modal-xl\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n            className: \"modal-title\",\n            children: [\"Booking History \\u2014 \", (_booking$user = booking.user) === null || _booking$user === void 0 ? void 0 : _booking$user.name]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"btn-close\",\n            onClick: onClose\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-body\",\n          children: /*#__PURE__*/_jsxDEV(DataTable, {\n            columns: columns,\n            data: histories,\n            progressPending: isLoading,\n            pagination: true,\n            highlightOnHover: true,\n            striped: true,\n            noDataComponent: \"No history found\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 5\n  }, this);\n};\n_s(BookingHistoryModal, \"qa+c+RdttcsbA8s9JpFYK0ll8I8=\", false, function () {\n  return [useGetBookingHistoryQuery];\n});\n_c = BookingHistoryModal;\nexport default BookingHistoryModal;\nvar _c;\n$RefreshReg$(_c, \"BookingHistoryModal\");","map":{"version":3,"names":["React","useGetBookingHistoryQuery","DataTable","jsxDEV","_jsxDEV","BookingHistoryModal","booking","onClose","_s","_booking$user","data","isLoading","_id","histories","renderOldData","oldData","style","background","padding","borderRadius","maxWidth","overflow","fontSize","children","className","listStyle","Object","entries","map","key","value","replace","fileName","_jsxFileName","lineNumber","columnNumber","JSON","stringify","String","columns","name","selector","row","changeType","sortable","center","_row$updatedBy","updatedBy","Date","createdAt","toLocaleString","dateStyle","timeStyle","cell","grow","display","backgroundColor","user","type","onClick","progressPending","pagination","highlightOnHover","striped","noDataComponent","_c","$RefreshReg$"],"sources":["/var/www/aayoApp/frontend/src/components/admin/BookingHistoryModal.jsx"],"sourcesContent":["import React from \"react\";\nimport { useGetBookingHistoryQuery } from \"../../redux/api/bookingApi\";\nimport DataTable from \"react-data-table-component\";\n\nconst BookingHistoryModal = ({ booking, onClose }) => {\n  const { data, isLoading } = useGetBookingHistoryQuery(booking._id);\n  const histories = data?.histories || [];\n\n  // ✅ Helper: format oldData into user-friendly display\n  const renderOldData = (oldData) => {\n    if (!oldData || typeof oldData !== \"object\") return \"-\";\n\n    return (\n      <div\n        style={{\n          background: \"#f8f9fa\",\n          padding: \"8px\",\n          borderRadius: \"8px\",\n          maxWidth: \"350px\",\n          overflow: \"auto\",\n          fontSize: \"12px\",\n        }}\n      >\n        <ul className=\"mb-0\" style={{ listStyle: \"none\", padding: 0 }}>\n          {Object.entries(oldData).map(([key, value]) => (\n            <li key={key}>\n              <strong>{key.replace(/([A-Z])/g, \" $1\")}: </strong>\n              {typeof value === \"object\"\n                ? JSON.stringify(value)\n                : String(value || \"-\")}\n            </li>\n          ))}\n        </ul>\n      </div>\n    );\n  };\n\n  const columns = [\n    {\n      name: \"Change Type\",\n      selector: (row) => row.changeType || \"-\",\n      sortable: true,\n      center: true,\n    },\n    {\n      name: \"Updated By\",\n      selector: (row) => row.updatedBy?.name || \"-\",\n      center: true,\n    },\n    {\n      name: \"Date\",\n      selector: (row) =>\n        new Date(row.createdAt).toLocaleString(\"en-IN\", {\n          dateStyle: \"medium\",\n          timeStyle: \"short\",\n        }),\n      center: true,\n    },\n    {\n      name: \"Old Data\",\n      cell: (row) => renderOldData(row.oldData),\n      grow: 3,\n    },\n  ];\n\n  return (\n    <div\n      className=\"modal fade show\"\n      style={{ display: \"block\", backgroundColor: \"rgba(0,0,0,0.5)\" }}\n    >\n      <div className=\"modal-dialog modal-xl\">\n        <div className=\"modal-content\">\n          <div className=\"modal-header\">\n            <h5 className=\"modal-title\">\n              Booking History — {booking.user?.name}\n            </h5>\n            <button\n              type=\"button\"\n              className=\"btn-close\"\n              onClick={onClose}\n            ></button>\n          </div>\n\n          <div className=\"modal-body\">\n            <DataTable\n              columns={columns}\n              data={histories}\n              progressPending={isLoading}\n              pagination\n              highlightOnHover\n              striped\n              noDataComponent=\"No history found\"\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default BookingHistoryModal;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}