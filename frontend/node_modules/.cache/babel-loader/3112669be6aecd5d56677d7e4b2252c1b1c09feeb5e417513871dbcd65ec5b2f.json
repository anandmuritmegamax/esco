{"ast":null,"code":"var _jsxFileName = \"/var/www/aayoS/frontend/src/components/admin/FlightForm.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { useCreateFlightMutation, useUpdateFlightMutation } from \"../../redux/api/flightApi\";\nimport { useGetFlightTypesQuery } from \"../../redux/api/flightTypeApi\";\nimport toast from \"react-hot-toast\";\nimport Select from \"react-select\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst FlightForm = ({\n  editingFlight,\n  onSuccess\n}) => {\n  _s();\n  var _flightTypes$flightTy;\n  const [form, setForm] = useState({\n    flightType: \"\",\n    from: \"\",\n    to: \"\",\n    date: \"\",\n    time: \"\"\n  });\n  const {\n    data: flightTypes\n  } = useGetFlightTypesQuery();\n  const [createFlight] = useCreateFlightMutation();\n  const [updateFlight] = useUpdateFlightMutation();\n  console.log(\"flights: \", flightTypes);\n  useEffect(() => {\n    if (editingFlight) {\n      setForm({\n        flightType: editingFlight.flightType._id,\n        from: editingFlight.from,\n        to: editingFlight.to,\n        date: editingFlight.date.split(\"T\")[0],\n        time: editingFlight.time\n      });\n    }\n  }, [editingFlight]);\n  const handleChange = e => setForm({\n    ...form,\n    [e.target.name]: e.target.value\n  });\n  const handleSubmit = async e => {\n    e.preventDefault();\n    try {\n      if (editingFlight) {\n        await updateFlight({\n          id: editingFlight._id,\n          data: form\n        }).unwrap();\n        toast.success(\"Flight updated\");\n      } else {\n        await createFlight(form).unwrap();\n        toast.success(\"Flight created\");\n      }\n      onSuccess();\n    } catch (err) {\n      toast.error(\"Error saving flight\");\n    }\n  };\n  const flightTypeOptions = flightTypes === null || flightTypes === void 0 ? void 0 : (_flightTypes$flightTy = flightTypes.flightTypes) === null || _flightTypes$flightTy === void 0 ? void 0 : _flightTypes$flightTy.map(f => ({\n    value: f._id,\n    label: f.name\n  }));\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit,\n    className: \"border p-3 rounded mt-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n      children: [editingFlight ? \"Edit\" : \"Add\", \" Empty Legs\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Select, {\n      className: \"mb-2\",\n      name: \"flightType\",\n      options: flightTypeOptions,\n      value: (flightTypeOptions === null || flightTypeOptions === void 0 ? void 0 : flightTypeOptions.find(f => f.value === form.flightType)) || null,\n      onChange: selected => setForm(prev => ({\n        ...prev,\n        flightType: (selected === null || selected === void 0 ? void 0 : selected.value) || \"\"\n      })),\n      placeholder: \"Select Flight Type\",\n      isClearable: true,\n      isSearchable: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      name: \"from\",\n      placeholder: \"From\",\n      className: \"form-control mb-2\",\n      value: form.from,\n      onChange: handleChange,\n      required: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      name: \"to\",\n      placeholder: \"To\",\n      className: \"form-control mb-2\",\n      value: form.to,\n      onChange: handleChange,\n      required: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"date\",\n      name: \"date\",\n      className: \"form-control mb-2\",\n      value: form.date,\n      onChange: handleChange,\n      required: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"time\",\n      name: \"time\",\n      className: \"form-control mb-2\",\n      value: form.time,\n      onChange: handleChange,\n      required: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"btn btn-success\",\n      type: \"submit\",\n      children: [editingFlight ? \"Update\" : \"Add\", \" Empty Legs\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 5\n  }, this);\n};\n_s(FlightForm, \"ZNdNh8Q5K8X66W7HXu6rrm8PU+E=\", false, function () {\n  return [useGetFlightTypesQuery, useCreateFlightMutation, useUpdateFlightMutation];\n});\n_c = FlightForm;\nexport default FlightForm;\nvar _c;\n$RefreshReg$(_c, \"FlightForm\");","map":{"version":3,"names":["React","useEffect","useState","useCreateFlightMutation","useUpdateFlightMutation","useGetFlightTypesQuery","toast","Select","jsxDEV","_jsxDEV","FlightForm","editingFlight","onSuccess","_s","_flightTypes$flightTy","form","setForm","flightType","from","to","date","time","data","flightTypes","createFlight","updateFlight","console","log","_id","split","handleChange","e","target","name","value","handleSubmit","preventDefault","id","unwrap","success","err","error","flightTypeOptions","map","f","label","onSubmit","className","children","fileName","_jsxFileName","lineNumber","columnNumber","options","find","onChange","selected","prev","placeholder","isClearable","isSearchable","type","required","_c","$RefreshReg$"],"sources":["/var/www/aayoS/frontend/src/components/admin/FlightForm.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport {\n  useCreateFlightMutation,\n  useUpdateFlightMutation,\n} from \"../../redux/api/flightApi\";\nimport { useGetFlightTypesQuery } from \"../../redux/api/flightTypeApi\";\nimport toast from \"react-hot-toast\";\nimport Select from \"react-select\";\n\nconst FlightForm = ({ editingFlight, onSuccess }) => {\n  const [form, setForm] = useState({\n    flightType: \"\",\n    from: \"\",\n    to: \"\",\n    date: \"\",\n    time: \"\",\n  });\n\n  const { data: flightTypes } = useGetFlightTypesQuery();\n  const [createFlight] = useCreateFlightMutation();\n  const [updateFlight] = useUpdateFlightMutation();\n  console.log(\"flights: \", flightTypes);\n  useEffect(() => {\n    if (editingFlight) {\n      setForm({\n        flightType: editingFlight.flightType._id,\n        from: editingFlight.from,\n        to: editingFlight.to,\n        date: editingFlight.date.split(\"T\")[0],\n        time: editingFlight.time,\n      });\n    }\n  }, [editingFlight]);\n\n  const handleChange = (e) =>\n    setForm({ ...form, [e.target.name]: e.target.value });\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    try {\n      if (editingFlight) {\n        await updateFlight({ id: editingFlight._id, data: form }).unwrap();\n        toast.success(\"Flight updated\");\n      } else {\n        await createFlight(form).unwrap();\n        toast.success(\"Flight created\");\n      }\n      onSuccess();\n    } catch (err) {\n      toast.error(\"Error saving flight\");\n    }\n  };\n\n  const flightTypeOptions = flightTypes?.flightTypes?.map((f) => ({\n    value: f._id,\n    label: f.name,\n  }));\n\n  return (\n    <form onSubmit={handleSubmit} className=\"border p-3 rounded mt-4\">\n      <h5>{editingFlight ? \"Edit\" : \"Add\"} Empty Legs</h5>\n\n      <Select\n        className=\"mb-2\"\n        name=\"flightType\"\n        options={flightTypeOptions}\n        value={\n          flightTypeOptions?.find((f) => f.value === form.flightType) || null\n        }\n        onChange={(selected) =>\n          setForm((prev) => ({\n            ...prev,\n            flightType: selected?.value || \"\",\n          }))\n        }\n        placeholder=\"Select Flight Type\"\n        isClearable\n        isSearchable\n      />\n\n      {/* <select\n        className=\"form-select mb-2\"\n        name=\"flightType\"\n        value={form.flightType}\n        onChange={handleChange}\n        required\n      >\n        <option value=\"\">Select Flight Type</option>\n        {flightTypes?.flightTypes?.map((f) => (\n          <option key={f._id} value={f._id}>\n            {f.name}\n          </option>\n        ))}\n      </select> */}\n      <input\n        type=\"text\"\n        name=\"from\"\n        placeholder=\"From\"\n        className=\"form-control mb-2\"\n        value={form.from}\n        onChange={handleChange}\n        required\n      />\n      <input\n        type=\"text\"\n        name=\"to\"\n        placeholder=\"To\"\n        className=\"form-control mb-2\"\n        value={form.to}\n        onChange={handleChange}\n        required\n      />\n      <input\n        type=\"date\"\n        name=\"date\"\n        className=\"form-control mb-2\"\n        value={form.date}\n        onChange={handleChange}\n        required\n      />\n      <input\n        type=\"time\"\n        name=\"time\"\n        className=\"form-control mb-2\"\n        value={form.time}\n        onChange={handleChange}\n        required\n      />\n      <button className=\"btn btn-success\" type=\"submit\">\n        {editingFlight ? \"Update\" : \"Add\"} Empty Legs\n      </button>\n    </form>\n  );\n};\n\nexport default FlightForm;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}