{"ast":null,"code":"var _jsxFileName = \"/var/www/aayoApp/frontend/src/components/admin/ConvertToBookingModal.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport toast from \"react-hot-toast\";\nimport { useConvertLeadMutation } from \"../../redux/api/leadApi\";\nimport { useGetFlightTypesQuery } from \"../../redux/api/flightTypeApi\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ConvertToBookingModal = ({\n  lead,\n  onClose,\n  refetch\n}) => {\n  _s();\n  var _lead$travelDate, _flightTypes$flightTy;\n  const [form, setForm] = useState({\n    amount: \"\",\n    travelDate: (_lead$travelDate = lead.travelDate) === null || _lead$travelDate === void 0 ? void 0 : _lead$travelDate.split(\"T\")[0],\n    travelTime: lead.travelTime,\n    remark: \"\",\n    flightType: \"\"\n  });\n  const [convertLead, {\n    isLoading\n  }] = useConvertLeadMutation();\n  const {\n    data: flightTypes = [],\n    isLoading: flightLoading\n  } = useGetFlightTypesQuery(); // ✅ fetch flight types\n\n  const handleChange = e => setForm({\n    ...form,\n    [e.target.name]: e.target.value\n  });\n  const handleSubmit = async () => {\n    const {\n      amount,\n      travelDate,\n      travelTime,\n      remark,\n      flightType\n    } = form;\n    if (!amount || !travelDate || !travelTime || !flightType || !remark) {\n      toast.error(\"All fields are required\");\n      return;\n    }\n    try {\n      await convertLead({\n        id: lead._id,\n        data: {\n          amount,\n          travelDate,\n          travelTime,\n          remark,\n          flightType\n        }\n      }).unwrap();\n      toast.success(\"Lead converted to booking successfully\");\n      onClose();\n      refetch();\n    } catch (err) {\n      toast.error(\"Failed to convert lead\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"modal show d-block\",\n    tabIndex: \"-1\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-dialog modal-lg\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n            children: \"Convert Lead to Booking\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 47,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn-close\",\n            onClick: onClose\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 48,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-body row\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-4 mb-2\",\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"form-control\",\n              placeholder: \"Amount (INR)\",\n              name: \"amount\",\n              value: form.amount,\n              onChange: handleChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 52,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 51,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-4 mb-2\",\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"form-control\",\n              type: \"date\",\n              name: \"travelDate\",\n              value: form.travelDate,\n              onChange: handleChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 61,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-4 mb-2\",\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"form-control\",\n              type: \"time\",\n              name: \"travelTime\",\n              value: form.travelTime,\n              onChange: handleChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 70,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-6 mb-2\",\n            children: /*#__PURE__*/_jsxDEV(\"select\", {\n              className: \"form-select\",\n              name: \"flightType\",\n              value: form.flightType,\n              onChange: handleChange,\n              disabled: flightLoading,\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"Select Flight Type\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 86,\n                columnNumber: 17\n              }, this), flightTypes === null || flightTypes === void 0 ? void 0 : (_flightTypes$flightTy = flightTypes.flightTypes) === null || _flightTypes$flightTy === void 0 ? void 0 : _flightTypes$flightTy.map(type => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: type._id,\n                children: type.name\n              }, type._id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 88,\n                columnNumber: 19\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-12 mb-2\",\n            children: /*#__PURE__*/_jsxDEV(\"textarea\", {\n              className: \"form-control\",\n              rows: \"3\",\n              placeholder: \"Write an update for the lead\",\n              name: \"remark\",\n              value: form.remark,\n              onChange: handleChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-footer\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-primary\",\n            onClick: handleSubmit,\n            disabled: isLoading,\n            children: \"Convert\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-secondary\",\n            onClick: onClose,\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 5\n  }, this);\n};\n_s(ConvertToBookingModal, \"GHR69kXkcI0aReRjq7IRUTUqTuU=\", false, function () {\n  return [useConvertLeadMutation, useGetFlightTypesQuery];\n});\n_c = ConvertToBookingModal;\nexport default ConvertToBookingModal;\nvar _c;\n$RefreshReg$(_c, \"ConvertToBookingModal\");","map":{"version":3,"names":["React","useState","toast","useConvertLeadMutation","useGetFlightTypesQuery","jsxDEV","_jsxDEV","ConvertToBookingModal","lead","onClose","refetch","_s","_lead$travelDate","_flightTypes$flightTy","form","setForm","amount","travelDate","split","travelTime","remark","flightType","convertLead","isLoading","data","flightTypes","flightLoading","handleChange","e","target","name","value","handleSubmit","error","id","_id","unwrap","success","err","className","tabIndex","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","placeholder","onChange","type","disabled","map","rows","_c","$RefreshReg$"],"sources":["/var/www/aayoApp/frontend/src/components/admin/ConvertToBookingModal.jsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport toast from \"react-hot-toast\";\nimport { useConvertLeadMutation } from \"../../redux/api/leadApi\";\nimport { useGetFlightTypesQuery } from \"../../redux/api/flightTypeApi\";\n\nconst ConvertToBookingModal = ({ lead, onClose, refetch }) => {\n  const [form, setForm] = useState({\n    amount: \"\",\n    travelDate: lead.travelDate?.split(\"T\")[0],\n    travelTime: lead.travelTime,\n    remark: \"\",\n    flightType: \"\",\n  });\n\n  const [convertLead, { isLoading }] = useConvertLeadMutation();\n  const { data: flightTypes = [], isLoading: flightLoading } =\n    useGetFlightTypesQuery(); // ✅ fetch flight types\n\n  const handleChange = (e) =>\n    setForm({ ...form, [e.target.name]: e.target.value });\n\n  const handleSubmit = async () => {\n    const { amount, travelDate, travelTime, remark, flightType } = form;\n    if (!amount || !travelDate || !travelTime || !flightType || !remark) {\n      toast.error(\"All fields are required\");\n      return;\n    }\n\n    try {\n      await convertLead({\n        id: lead._id,\n        data: { amount, travelDate, travelTime, remark, flightType },\n      }).unwrap();\n      toast.success(\"Lead converted to booking successfully\");\n      onClose();\n      refetch();\n    } catch (err) {\n      toast.error(\"Failed to convert lead\");\n    }\n  };\n\n  return (\n    <div className=\"modal show d-block\" tabIndex=\"-1\">\n      <div className=\"modal-dialog modal-lg\">\n        <div className=\"modal-content\">\n          <div className=\"modal-header\">\n            <h5>Convert Lead to Booking</h5>\n            <button className=\"btn-close\" onClick={onClose}></button>\n          </div>\n          <div className=\"modal-body row\">\n            <div className=\"col-md-4 mb-2\">\n              <input\n                className=\"form-control\"\n                placeholder=\"Amount (INR)\"\n                name=\"amount\"\n                value={form.amount}\n                onChange={handleChange}\n              />\n            </div>\n            <div className=\"col-md-4 mb-2\">\n              <input\n                className=\"form-control\"\n                type=\"date\"\n                name=\"travelDate\"\n                value={form.travelDate}\n                onChange={handleChange}\n              />\n            </div>\n            <div className=\"col-md-4 mb-2\">\n              <input\n                className=\"form-control\"\n                type=\"time\"\n                name=\"travelTime\"\n                value={form.travelTime}\n                onChange={handleChange}\n              />\n            </div>\n            <div className=\"col-md-6 mb-2\">\n              <select\n                className=\"form-select\"\n                name=\"flightType\"\n                value={form.flightType}\n                onChange={handleChange}\n                disabled={flightLoading}\n              >\n                <option value=\"\">Select Flight Type</option>\n                {flightTypes?.flightTypes?.map((type) => (\n                  <option key={type._id} value={type._id}>\n                    {type.name}\n                  </option>\n                ))}\n              </select>\n            </div>\n            <div className=\"col-md-12 mb-2\">\n              <textarea\n                className=\"form-control\"\n                rows=\"3\"\n                placeholder=\"Write an update for the lead\"\n                name=\"remark\"\n                value={form.remark}\n                onChange={handleChange}\n              ></textarea>\n            </div>\n          </div>\n          <div className=\"modal-footer\">\n            <button\n              className=\"btn btn-primary\"\n              onClick={handleSubmit}\n              disabled={isLoading}\n            >\n              Convert\n            </button>\n            <button className=\"btn btn-secondary\" onClick={onClose}>\n              Cancel\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ConvertToBookingModal;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}