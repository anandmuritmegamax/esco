{"ast":null,"code":"var _jsxFileName = \"/var/www/aayoApp/frontend/src/components/admin/BookingList.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport DataTable from \"react-data-table-component\";\nimport { useSearchParams } from \"react-router-dom\";\nimport { useGetBookingsQuery } from \"../../redux/api/bookingApi\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst BookingList = () => {\n  _s();\n  const [searchParams, setSearchParams] = useSearchParams();\n  const [searchTerm, setSearchTerm] = useState(searchParams.get(\"search\") || \"\");\n  const [page, setPage] = useState(Number(searchParams.get(\"page\") || 1));\n  const [sortField, setSortField] = useState(searchParams.get(\"sort\") || \"\");\n  const [sortOrder, setSortOrder] = useState(\"asc\");\n  const params = {\n    page,\n    search: searchTerm || undefined,\n    sort: sortField ? sortOrder === \"desc\" ? `-${sortField}` : sortField : undefined\n  };\n  const {\n    data,\n    isLoading,\n    refetch\n  } = useGetBookingsQuery(params);\n  const bookings = (data === null || data === void 0 ? void 0 : data.bookings) || [];\n  const totalRows = (data === null || data === void 0 ? void 0 : data.filteredBookingsCount) || 0;\n  const resPerPage = (data === null || data === void 0 ? void 0 : data.resPerPage) || 10;\n  useEffect(() => {\n    const query = {};\n    if (searchTerm) query.search = searchTerm;\n    if (page) query.page = page;\n    if (sortField) query.sort = sortOrder === \"desc\" ? `-${sortField}` : sortField;\n    setSearchParams(query);\n  }, [searchTerm, page, sortField, sortOrder]);\n  const handleSort = (column, direction) => {\n    setSortField(column.selector);\n    setSortOrder(direction);\n  };\n  const handleSearch = e => {\n    e.preventDefault();\n    setPage(1);\n    refetch();\n  };\n  const columns = [{\n    name: \"ID\",\n    selector: row => row._id.slice(-5),\n    sortable: true\n  }, {\n    name: \"Traveler\",\n    selector: row => {\n      var _row$user;\n      return (_row$user = row.user) === null || _row$user === void 0 ? void 0 : _row$user.name;\n    },\n    sortable: true\n  }, {\n    name: \"Email\",\n    selector: row => {\n      var _row$user2;\n      return (_row$user2 = row.user) === null || _row$user2 === void 0 ? void 0 : _row$user2.email;\n    },\n    sortable: true\n  }, {\n    name: \"Mobile\",\n    selector: row => {\n      var _row$user3;\n      return (_row$user3 = row.user) === null || _row$user3 === void 0 ? void 0 : _row$user3.mobile;\n    },\n    sortable: true\n  }, {\n    name: \"From\",\n    selector: row => row.fromPlace\n  }, {\n    name: \"To\",\n    selector: row => row.toPlace\n  }, {\n    name: \"Date\",\n    selector: row => row.travelDate\n  }, {\n    name: \"Time\",\n    selector: row => row.travelTime\n  }, {\n    name: \"Status\",\n    selector: row => row.status\n  }];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container mt-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"mb-3\",\n      children: \"Booking List\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSearch,\n      className: \"mb-3\",\n      children: /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Search by traveler or email...\",\n        value: searchTerm,\n        onChange: e => setSearchTerm(e.target.value),\n        className: \"form-control\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(DataTable, {\n      columns: columns,\n      data: bookings,\n      progressPending: isLoading,\n      pagination: true,\n      paginationServer: true,\n      paginationTotalRows: totalRows,\n      paginationPerPage: resPerPage,\n      onChangePage: page => setPage(page),\n      onSort: handleSort,\n      sortServer: true,\n      highlightOnHover: true,\n      striped: true,\n      noHeader: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 94,\n    columnNumber: 5\n  }, this);\n};\n_s(BookingList, \"/yc7KiidIDd/hyXQh2IAV6VjxtM=\", false, function () {\n  return [useSearchParams, useGetBookingsQuery];\n});\n_c = BookingList;\nexport default BookingList;\nvar _c;\n$RefreshReg$(_c, \"BookingList\");","map":{"version":3,"names":["React","useState","useEffect","DataTable","useSearchParams","useGetBookingsQuery","jsxDEV","_jsxDEV","BookingList","_s","searchParams","setSearchParams","searchTerm","setSearchTerm","get","page","setPage","Number","sortField","setSortField","sortOrder","setSortOrder","params","search","undefined","sort","data","isLoading","refetch","bookings","totalRows","filteredBookingsCount","resPerPage","query","handleSort","column","direction","selector","handleSearch","e","preventDefault","columns","name","row","_id","slice","sortable","_row$user","user","_row$user2","email","_row$user3","mobile","fromPlace","toPlace","travelDate","travelTime","status","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","placeholder","value","onChange","target","progressPending","pagination","paginationServer","paginationTotalRows","paginationPerPage","onChangePage","onSort","sortServer","highlightOnHover","striped","noHeader","_c","$RefreshReg$"],"sources":["/var/www/aayoApp/frontend/src/components/admin/BookingList.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport DataTable from \"react-data-table-component\";\nimport { useSearchParams } from \"react-router-dom\";\nimport { useGetBookingsQuery } from \"../../redux/api/bookingApi\";\n\nconst BookingList = () => {\n  const [searchParams, setSearchParams] = useSearchParams();\n  const [searchTerm, setSearchTerm] = useState(\n    searchParams.get(\"search\") || \"\"\n  );\n  const [page, setPage] = useState(Number(searchParams.get(\"page\") || 1));\n  const [sortField, setSortField] = useState(searchParams.get(\"sort\") || \"\");\n  const [sortOrder, setSortOrder] = useState(\"asc\");\n\n  const params = {\n    page,\n    search: searchTerm || undefined,\n    sort: sortField\n      ? sortOrder === \"desc\"\n        ? `-${sortField}`\n        : sortField\n      : undefined,\n  };\n\n  const { data, isLoading, refetch } = useGetBookingsQuery(params);\n  const bookings = data?.bookings || [];\n  const totalRows = data?.filteredBookingsCount || 0;\n  const resPerPage = data?.resPerPage || 10;\n\n  useEffect(() => {\n    const query = {};\n    if (searchTerm) query.search = searchTerm;\n    if (page) query.page = page;\n    if (sortField)\n      query.sort = sortOrder === \"desc\" ? `-${sortField}` : sortField;\n    setSearchParams(query);\n  }, [searchTerm, page, sortField, sortOrder]);\n\n  const handleSort = (column, direction) => {\n    setSortField(column.selector);\n    setSortOrder(direction);\n  };\n\n  const handleSearch = (e) => {\n    e.preventDefault();\n    setPage(1);\n    refetch();\n  };\n\n  const columns = [\n    {\n      name: \"ID\",\n      selector: (row) => row._id.slice(-5),\n      sortable: true,\n    },\n    {\n      name: \"Traveler\",\n      selector: (row) => row.user?.name,\n      sortable: true,\n    },\n    {\n      name: \"Email\",\n      selector: (row) => row.user?.email,\n      sortable: true,\n    },\n    {\n      name: \"Mobile\",\n      selector: (row) => row.user?.mobile,\n      sortable: true,\n    },\n    {\n      name: \"From\",\n      selector: (row) => row.fromPlace,\n    },\n    {\n      name: \"To\",\n      selector: (row) => row.toPlace,\n    },\n    {\n      name: \"Date\",\n      selector: (row) => row.travelDate,\n    },\n    {\n      name: \"Time\",\n      selector: (row) => row.travelTime,\n    },\n    {\n      name: \"Status\",\n      selector: (row) => row.status,\n    },\n  ];\n\n  return (\n    <div className=\"container mt-4\">\n      <h2 className=\"mb-3\">Booking List</h2>\n\n      <form onSubmit={handleSearch} className=\"mb-3\">\n        <input\n          type=\"text\"\n          placeholder=\"Search by traveler or email...\"\n          value={searchTerm}\n          onChange={(e) => setSearchTerm(e.target.value)}\n          className=\"form-control\"\n        />\n      </form>\n\n      <DataTable\n        columns={columns}\n        data={bookings}\n        progressPending={isLoading}\n        pagination\n        paginationServer\n        paginationTotalRows={totalRows}\n        paginationPerPage={resPerPage}\n        onChangePage={(page) => setPage(page)}\n        onSort={handleSort}\n        sortServer\n        highlightOnHover\n        striped\n        noHeader\n      />\n    </div>\n  );\n};\n\nexport default BookingList;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}