{"ast":null,"code":"var _user, _user$role;\nimport { createSlice } from \"@reduxjs/toolkit\";\nconst initialState = {\n  user: null,\n  isAuthenticated: false,\n  loading: true\n};\nconsole.log(\"data: \", (_user = user) === null || _user === void 0 ? void 0 : (_user$role = _user.role) === null || _user$role === void 0 ? void 0 : _user$role.permissions);\nexport const userSlice = createSlice({\n  initialState,\n  name: \"userSlice\",\n  reducers: {\n    setUser(state, action) {\n      var _user$role2, _user$role2$permissio;\n      const user = action.payload;\n      state.user = {\n        ...user,\n        permissions: (user === null || user === void 0 ? void 0 : (_user$role2 = user.role) === null || _user$role2 === void 0 ? void 0 : (_user$role2$permissio = _user$role2.permissions) === null || _user$role2$permissio === void 0 ? void 0 : _user$role2$permissio.map(p => p.name)) || []\n      };\n      state.isAuthenticated = true;\n      //state.user = action.payload;\n    },\n    setIsAuthenticated(state, action) {\n      state.isAuthenticated = action.payload;\n    },\n    setLoading(state, action) {\n      state.loading = action.payload;\n    },\n    clearUser(state) {\n      state.user = null;\n      state.isAuthenticated = false;\n    }\n  }\n});\nexport default userSlice.reducer;\nexport const {\n  setIsAuthenticated,\n  setUser,\n  setLoading,\n  clearUser\n} = userSlice.actions;","map":{"version":3,"names":["createSlice","initialState","user","isAuthenticated","loading","console","log","_user","_user$role","role","permissions","userSlice","name","reducers","setUser","state","action","_user$role2","_user$role2$permissio","payload","map","p","setIsAuthenticated","setLoading","clearUser","reducer","actions"],"sources":["/var/www/aayoApp/frontend/src/redux/features/userSlice.js"],"sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\n\nconst initialState = {\n    user: null,\n    isAuthenticated: false,\n    loading: true,\n}\nconsole.log(\"data: \", user?.role?.permissions)\nexport const userSlice = createSlice({\n    initialState,\n    name: \"userSlice\",\n    reducers: {\n        setUser(state, action) {\n            const user = action.payload;\n            state.user = {\n                ...user,\n                permissions: user?.role?.permissions?.map((p) => p.name) || [],\n            };\n            state.isAuthenticated = true;\n            //state.user = action.payload;\n        },\n        setIsAuthenticated(state, action) {\n            state.isAuthenticated = action.payload;\n        },\n        setLoading(state, action) {\n            state.loading = action.payload;\n        },\n        clearUser(state) {\n            state.user = null;\n            state.isAuthenticated = false;\n        },\n    }\n});\n\nexport default userSlice.reducer;\n\nexport const { setIsAuthenticated, setUser, setLoading, clearUser } = userSlice.actions"],"mappings":";AAAA,SAASA,WAAW,QAAQ,kBAAkB;AAE9C,MAAMC,YAAY,GAAG;EACjBC,IAAI,EAAE,IAAI;EACVC,eAAe,EAAE,KAAK;EACtBC,OAAO,EAAE;AACb,CAAC;AACDC,OAAO,CAACC,GAAG,CAAC,QAAQ,GAAAC,KAAA,GAAEL,IAAI,cAAAK,KAAA,wBAAAC,UAAA,GAAJD,KAAA,CAAME,IAAI,cAAAD,UAAA,uBAAVA,UAAA,CAAYE,WAAW,CAAC;AAC9C,OAAO,MAAMC,SAAS,GAAGX,WAAW,CAAC;EACjCC,YAAY;EACZW,IAAI,EAAE,WAAW;EACjBC,QAAQ,EAAE;IACNC,OAAOA,CAACC,KAAK,EAAEC,MAAM,EAAE;MAAA,IAAAC,WAAA,EAAAC,qBAAA;MACnB,MAAMhB,IAAI,GAAGc,MAAM,CAACG,OAAO;MAC3BJ,KAAK,CAACb,IAAI,GAAG;QACT,GAAGA,IAAI;QACPQ,WAAW,EAAE,CAAAR,IAAI,aAAJA,IAAI,wBAAAe,WAAA,GAAJf,IAAI,CAAEO,IAAI,cAAAQ,WAAA,wBAAAC,qBAAA,GAAVD,WAAA,CAAYP,WAAW,cAAAQ,qBAAA,uBAAvBA,qBAAA,CAAyBE,GAAG,CAAEC,CAAC,IAAKA,CAAC,CAACT,IAAI,CAAC,KAAI;MAChE,CAAC;MACDG,KAAK,CAACZ,eAAe,GAAG,IAAI;MAC5B;IACJ,CAAC;IACDmB,kBAAkBA,CAACP,KAAK,EAAEC,MAAM,EAAE;MAC9BD,KAAK,CAACZ,eAAe,GAAGa,MAAM,CAACG,OAAO;IAC1C,CAAC;IACDI,UAAUA,CAACR,KAAK,EAAEC,MAAM,EAAE;MACtBD,KAAK,CAACX,OAAO,GAAGY,MAAM,CAACG,OAAO;IAClC,CAAC;IACDK,SAASA,CAACT,KAAK,EAAE;MACbA,KAAK,CAACb,IAAI,GAAG,IAAI;MACjBa,KAAK,CAACZ,eAAe,GAAG,KAAK;IACjC;EACJ;AACJ,CAAC,CAAC;AAEF,eAAeQ,SAAS,CAACc,OAAO;AAEhC,OAAO,MAAM;EAAEH,kBAAkB;EAAER,OAAO;EAAES,UAAU;EAAEC;AAAU,CAAC,GAAGb,SAAS,CAACe,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}