{"ast":null,"code":"import { createSlice } from \"@reduxjs/toolkit\";\nimport { authApi } from \"../api/authApi\";\nconst initialState = {\n  isAuthenticated: false,\n  token: null,\n  user: null\n};\nconst authSlice = createSlice({\n  name: \"auth\",\n  initialState,\n  reducers: {\n    logout: state => {\n      state.isAuthenticated = false;\n      state.token = null;\n      state.user = null;\n      localStorage.removeItem(\"auth\");\n    },\n    loadAuthFromStorage: state => {\n      const raw = localStorage.getItem(\"auth\");\n      if (raw) {\n        const data = JSON.parse(raw);\n        state.isAuthenticated = true;\n        state.token = data.token;\n        state.user = data.user;\n      }\n    }\n  },\n  extraReducers: builder => {\n    builder.addMatcher(authApi.endpoints.login.matchFulfilled, (state, {\n      payload\n    }) => {\n      state.isAuthenticated = true;\n      state.token = payload.token;\n      state.user = payload.user;\n      localStorage.setItem(\"auth\", JSON.stringify({\n        token: payload.token,\n        user: payload.user\n      }));\n    });\n  }\n});\nexport const {\n  logout,\n  loadAuthFromStorage\n} = authSlice.actions;\nexport default authSlice.reducer;","map":{"version":3,"names":["createSlice","authApi","initialState","isAuthenticated","token","user","authSlice","name","reducers","logout","state","localStorage","removeItem","loadAuthFromStorage","raw","getItem","data","JSON","parse","extraReducers","builder","addMatcher","endpoints","login","matchFulfilled","payload","setItem","stringify","actions","reducer"],"sources":["/var/www/aayoS/frontend/src/redux/slices/authSlice.js"],"sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\nimport { authApi } from \"../api/authApi\";\n\nconst initialState = {\n    isAuthenticated: false,\n    token: null,\n    user: null,\n};\n\nconst authSlice = createSlice({\n    name: \"auth\",\n    initialState,\n    reducers: {\n        logout: (state) => {\n            state.isAuthenticated = false;\n            state.token = null;\n            state.user = null;\n            localStorage.removeItem(\"auth\");\n        },\n        loadAuthFromStorage: (state) => {\n            const raw = localStorage.getItem(\"auth\");\n            if (raw) {\n                const data = JSON.parse(raw);\n                state.isAuthenticated = true;\n                state.token = data.token;\n                state.user = data.user;\n            }\n        },\n    },\n    extraReducers: (builder) => {\n        builder.addMatcher(\n            authApi.endpoints.login.matchFulfilled,\n            (state, { payload }) => {\n                state.isAuthenticated = true;\n                state.token = payload.token;\n                state.user = payload.user;\n\n                localStorage.setItem(\n                    \"auth\",\n                    JSON.stringify({\n                        token: payload.token,\n                        user: payload.user,\n                    })\n                );\n            }\n        );\n    },\n});\n\nexport const { logout, loadAuthFromStorage } = authSlice.actions;\nexport default authSlice.reducer;\n"],"mappings":"AAAA,SAASA,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,OAAO,QAAQ,gBAAgB;AAExC,MAAMC,YAAY,GAAG;EACjBC,eAAe,EAAE,KAAK;EACtBC,KAAK,EAAE,IAAI;EACXC,IAAI,EAAE;AACV,CAAC;AAED,MAAMC,SAAS,GAAGN,WAAW,CAAC;EAC1BO,IAAI,EAAE,MAAM;EACZL,YAAY;EACZM,QAAQ,EAAE;IACNC,MAAM,EAAGC,KAAK,IAAK;MACfA,KAAK,CAACP,eAAe,GAAG,KAAK;MAC7BO,KAAK,CAACN,KAAK,GAAG,IAAI;MAClBM,KAAK,CAACL,IAAI,GAAG,IAAI;MACjBM,YAAY,CAACC,UAAU,CAAC,MAAM,CAAC;IACnC,CAAC;IACDC,mBAAmB,EAAGH,KAAK,IAAK;MAC5B,MAAMI,GAAG,GAAGH,YAAY,CAACI,OAAO,CAAC,MAAM,CAAC;MACxC,IAAID,GAAG,EAAE;QACL,MAAME,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACJ,GAAG,CAAC;QAC5BJ,KAAK,CAACP,eAAe,GAAG,IAAI;QAC5BO,KAAK,CAACN,KAAK,GAAGY,IAAI,CAACZ,KAAK;QACxBM,KAAK,CAACL,IAAI,GAAGW,IAAI,CAACX,IAAI;MAC1B;IACJ;EACJ,CAAC;EACDc,aAAa,EAAGC,OAAO,IAAK;IACxBA,OAAO,CAACC,UAAU,CACdpB,OAAO,CAACqB,SAAS,CAACC,KAAK,CAACC,cAAc,EACtC,CAACd,KAAK,EAAE;MAAEe;IAAQ,CAAC,KAAK;MACpBf,KAAK,CAACP,eAAe,GAAG,IAAI;MAC5BO,KAAK,CAACN,KAAK,GAAGqB,OAAO,CAACrB,KAAK;MAC3BM,KAAK,CAACL,IAAI,GAAGoB,OAAO,CAACpB,IAAI;MAEzBM,YAAY,CAACe,OAAO,CAChB,MAAM,EACNT,IAAI,CAACU,SAAS,CAAC;QACXvB,KAAK,EAAEqB,OAAO,CAACrB,KAAK;QACpBC,IAAI,EAAEoB,OAAO,CAACpB;MAClB,CAAC,CACL,CAAC;IACL,CACJ,CAAC;EACL;AACJ,CAAC,CAAC;AAEF,OAAO,MAAM;EAAEI,MAAM;EAAEI;AAAoB,CAAC,GAAGP,SAAS,CAACsB,OAAO;AAChE,eAAetB,SAAS,CAACuB,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}