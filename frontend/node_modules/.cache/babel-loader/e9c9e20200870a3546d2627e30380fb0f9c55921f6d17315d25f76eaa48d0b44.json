{"ast":null,"code":"var _jsxFileName = \"/var/www/aayoS/frontend/src/pages/admin/settings/MediaSettings.jsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport { useGetMediaSettingsQuery, useUpdateMediaSettingsMutation } from \"../../../redux/api/settingsApi\";\nimport toast from \"react-hot-toast\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst IMAGE_TYPES = [\"jpg\", \"png\", \"webp\"];\nexport default function MediaSettings() {\n  _s();\n  const {\n    data\n  } = useGetMediaSettingsQuery();\n  const [updateSettings, {\n    isLoading\n  }] = useUpdateMediaSettingsMutation();\n  const [form, setForm] = useState({\n    \"media.allowedImageTypes\": [\"jpg\", \"png\"],\n    \"media.maxImageSizeMb\": 5,\n    \"media.blurUntilApproved\": false,\n    \"media.watermarkImages\": false,\n    \"media.autoDeleteRejectedMedia\": false\n  });\n  useEffect(() => {\n    if (data !== null && data !== void 0 && data.settings) {\n      setForm(prev => ({\n        ...prev,\n        ...data.settings\n      }));\n    }\n  }, [data]);\n  const toggleArrayValue = (key, value) => {\n    setForm(prev => ({\n      ...prev,\n      [key]: prev[key].includes(value) ? prev[key].filter(v => v !== value) : [...prev[key], value]\n    }));\n  };\n  const handleChange = e => {\n    const {\n      name,\n      type,\n      checked,\n      value\n    } = e.target;\n    setForm({\n      ...form,\n      [name]: type === \"checkbox\" ? checked : value\n    });\n  };\n  const save = async () => {\n    await updateSettings(form).unwrap();\n    toast.success(\"Media rules saved\");\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"card p-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      className: \"mb-4\",\n      children: \"Media & Content Rules\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Allowed Image Types\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex gap-3\",\n        children: IMAGE_TYPES.map(type => /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-check-label\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"checkbox\",\n            checked: form[\"media.allowedImageTypes\"].includes(type),\n            onChange: () => toggleArrayValue(\"media.allowedImageTypes\", type),\n            className: \"form-check-input me-1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 15\n          }, this), type.toUpperCase()]\n        }, type, true, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Max Image Size (MB)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        name: \"media.maxImageSizeMb\",\n        value: form[\"media.maxImageSizeMb\"],\n        onChange: handleChange,\n        className: \"form-control\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-check mb-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"checkbox\",\n        name: \"media.blurUntilApproved\",\n        checked: form[\"media.blurUntilApproved\"],\n        onChange: handleChange,\n        className: \"form-check-input\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"form-check-label\",\n        children: \"Blur images until approved\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-check mb-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"checkbox\",\n        name: \"media.watermarkImages\",\n        checked: form[\"media.watermarkImages\"],\n        onChange: handleChange,\n        className: \"form-check-input\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"form-check-label\",\n        children: \"Watermark images (future)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-check mb-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"checkbox\",\n        name: \"media.autoDeleteRejectedMedia\",\n        checked: form[\"media.autoDeleteRejectedMedia\"],\n        onChange: handleChange,\n        className: \"form-check-input\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"form-check-label\",\n        children: \"Auto-delete rejected media\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"btn btn-dark\",\n      onClick: save,\n      disabled: isLoading,\n      children: \"Save Settings\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 5\n  }, this);\n}\n_s(MediaSettings, \"M/wu2spTSrtje+bcwVEgcQa6oIA=\", false, function () {\n  return [useGetMediaSettingsQuery, useUpdateMediaSettingsMutation];\n});\n_c = MediaSettings;\nvar _c;\n$RefreshReg$(_c, \"MediaSettings\");","map":{"version":3,"names":["useEffect","useState","useGetMediaSettingsQuery","useUpdateMediaSettingsMutation","toast","jsxDEV","_jsxDEV","IMAGE_TYPES","MediaSettings","_s","data","updateSettings","isLoading","form","setForm","settings","prev","toggleArrayValue","key","value","includes","filter","v","handleChange","e","name","type","checked","target","save","unwrap","success","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","onChange","toUpperCase","onClick","disabled","_c","$RefreshReg$"],"sources":["/var/www/aayoS/frontend/src/pages/admin/settings/MediaSettings.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport {\n  useGetMediaSettingsQuery,\n  useUpdateMediaSettingsMutation,\n} from \"../../../redux/api/settingsApi\";\nimport toast from \"react-hot-toast\";\n\nconst IMAGE_TYPES = [\"jpg\", \"png\", \"webp\"];\n\nexport default function MediaSettings() {\n  const { data } = useGetMediaSettingsQuery();\n  const [updateSettings, { isLoading }] = useUpdateMediaSettingsMutation();\n\n  const [form, setForm] = useState({\n    \"media.allowedImageTypes\": [\"jpg\", \"png\"],\n    \"media.maxImageSizeMb\": 5,\n    \"media.blurUntilApproved\": false,\n    \"media.watermarkImages\": false,\n    \"media.autoDeleteRejectedMedia\": false,\n  });\n\n  useEffect(() => {\n    if (data?.settings) {\n      setForm((prev) => ({ ...prev, ...data.settings }));\n    }\n  }, [data]);\n\n  const toggleArrayValue = (key, value) => {\n    setForm((prev) => ({\n      ...prev,\n      [key]: prev[key].includes(value)\n        ? prev[key].filter((v) => v !== value)\n        : [...prev[key], value],\n    }));\n  };\n\n  const handleChange = (e) => {\n    const { name, type, checked, value } = e.target;\n    setForm({ ...form, [name]: type === \"checkbox\" ? checked : value });\n  };\n\n  const save = async () => {\n    await updateSettings(form).unwrap();\n    toast.success(\"Media rules saved\");\n  };\n\n  return (\n    <div className=\"card p-4\">\n      <h3 className=\"mb-4\">Media & Content Rules</h3>\n\n      {/* Allowed Image Types */}\n      <div className=\"mb-3\">\n        <label>Allowed Image Types</label>\n        <div className=\"d-flex gap-3\">\n          {IMAGE_TYPES.map((type) => (\n            <label key={type} className=\"form-check-label\">\n              <input\n                type=\"checkbox\"\n                checked={form[\"media.allowedImageTypes\"].includes(type)}\n                onChange={() =>\n                  toggleArrayValue(\"media.allowedImageTypes\", type)\n                }\n                className=\"form-check-input me-1\"\n              />\n              {type.toUpperCase()}\n            </label>\n          ))}\n        </div>\n      </div>\n\n      {/* Max Image Size */}\n      <div className=\"mb-3\">\n        <label>Max Image Size (MB)</label>\n        <input\n          type=\"number\"\n          name=\"media.maxImageSizeMb\"\n          value={form[\"media.maxImageSizeMb\"]}\n          onChange={handleChange}\n          className=\"form-control\"\n        />\n      </div>\n\n      {/* Blur Until Approved */}\n      <div className=\"form-check mb-2\">\n        <input\n          type=\"checkbox\"\n          name=\"media.blurUntilApproved\"\n          checked={form[\"media.blurUntilApproved\"]}\n          onChange={handleChange}\n          className=\"form-check-input\"\n        />\n        <label className=\"form-check-label\">Blur images until approved</label>\n      </div>\n\n      {/* Watermark */}\n      <div className=\"form-check mb-2\">\n        <input\n          type=\"checkbox\"\n          name=\"media.watermarkImages\"\n          checked={form[\"media.watermarkImages\"]}\n          onChange={handleChange}\n          className=\"form-check-input\"\n        />\n        <label className=\"form-check-label\">Watermark images (future)</label>\n      </div>\n\n      {/* Auto Delete */}\n      <div className=\"form-check mb-4\">\n        <input\n          type=\"checkbox\"\n          name=\"media.autoDeleteRejectedMedia\"\n          checked={form[\"media.autoDeleteRejectedMedia\"]}\n          onChange={handleChange}\n          className=\"form-check-input\"\n        />\n        <label className=\"form-check-label\">Auto-delete rejected media</label>\n      </div>\n\n      <button className=\"btn btn-dark\" onClick={save} disabled={isLoading}>\n        Save Settings\n      </button>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}