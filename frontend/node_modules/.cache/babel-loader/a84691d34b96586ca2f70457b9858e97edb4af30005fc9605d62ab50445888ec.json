{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useGetProfileQuery } from \"../../redux/api/authApi\";\nimport { useEffect } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { logout } from \"../../redux/slices/authSlice\";\nconst AuthWrapper = ({\n  children\n}) => {\n  _s();\n  const token = localStorage.getItem(\"authToken\"); // Adjust key if your token is stored differently (e.g., \"token\")\n  const {\n    data,\n    isError\n  } = useGetProfileQuery(undefined, {\n    skip: !token // Skip fetch if no token\n  });\n  const dispatch = useDispatch();\n  useEffect(() => {\n    if (isError) {\n      dispatch(logout());\n      localStorage.removeItem(\"authToken\"); // Clean up invalid token\n      // Optional: Redirect to login (but since it's root, it will handle naturally)\n    }\n  }, [isError, dispatch]);\n  return children;\n};\n_s(AuthWrapper, \"7dKRD36LAxbYuQSUh59ALlOF7jo=\", false, function () {\n  return [useGetProfileQuery, useDispatch];\n});\n_c = AuthWrapper;\nexport default AuthWrapper;\nvar _c;\n$RefreshReg$(_c, \"AuthWrapper\");","map":{"version":3,"names":["useGetProfileQuery","useEffect","useDispatch","logout","AuthWrapper","children","_s","token","localStorage","getItem","data","isError","undefined","skip","dispatch","removeItem","_c","$RefreshReg$"],"sources":["/var/www/aayoS/frontend/src/components/AuthWrapper.jsx"],"sourcesContent":["import { useGetProfileQuery } from \"../../redux/api/authApi\";\nimport { useEffect } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { logout } from \"../../redux/slices/authSlice\";\n\nconst AuthWrapper = ({ children }) => {\n  const token = localStorage.getItem(\"authToken\"); // Adjust key if your token is stored differently (e.g., \"token\")\n  const { data, isError } = useGetProfileQuery(undefined, {\n    skip: !token, // Skip fetch if no token\n  });\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    if (isError) {\n      dispatch(logout());\n      localStorage.removeItem(\"authToken\"); // Clean up invalid token\n      // Optional: Redirect to login (but since it's root, it will handle naturally)\n    }\n  }, [isError, dispatch]);\n\n  return children;\n};\n\nexport default AuthWrapper;\n"],"mappings":";AAAA,SAASA,kBAAkB,QAAQ,yBAAyB;AAC5D,SAASC,SAAS,QAAQ,OAAO;AACjC,SAASC,WAAW,QAAQ,aAAa;AACzC,SAASC,MAAM,QAAQ,8BAA8B;AAErD,MAAMC,WAAW,GAAGA,CAAC;EAAEC;AAAS,CAAC,KAAK;EAAAC,EAAA;EACpC,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC;EACjD,MAAM;IAAEC,IAAI;IAAEC;EAAQ,CAAC,GAAGX,kBAAkB,CAACY,SAAS,EAAE;IACtDC,IAAI,EAAE,CAACN,KAAK,CAAE;EAChB,CAAC,CAAC;EACF,MAAMO,QAAQ,GAAGZ,WAAW,CAAC,CAAC;EAE9BD,SAAS,CAAC,MAAM;IACd,IAAIU,OAAO,EAAE;MACXG,QAAQ,CAACX,MAAM,CAAC,CAAC,CAAC;MAClBK,YAAY,CAACO,UAAU,CAAC,WAAW,CAAC,CAAC,CAAC;MACtC;IACF;EACF,CAAC,EAAE,CAACJ,OAAO,EAAEG,QAAQ,CAAC,CAAC;EAEvB,OAAOT,QAAQ;AACjB,CAAC;AAACC,EAAA,CAhBIF,WAAW;EAAA,QAEWJ,kBAAkB,EAG3BE,WAAW;AAAA;AAAAc,EAAA,GALxBZ,WAAW;AAkBjB,eAAeA,WAAW;AAAC,IAAAY,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}